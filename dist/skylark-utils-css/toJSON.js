/**
 * skylark-utils-css - The skylark css utility library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0-beta
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx/langx","./css","./Parser"],function(e,n,t){function a(e,n){var a=new t({starHack:!1,ieFilters:!1,strict:!1}),i=new r(n);return a.addListener("startstylesheet",function(){i.begin()}),a.addListener("endstylesheet",function(){i.end()}),a.addListener("charset",function(e){i.beginBlock({name:"@charset",values:e.charset}),i.endBlock()}),a.addListener("namespace",function(e){var n="@Namespace";e.prefix&&(n=n+" "+e.prefix),i.beginBlock({name:n,values:'"'+e.uri+'"'}),i.endBlock()}),a.addListener("startfontface",function(e){}),a.addListener("endfontface",function(e){}),a.addListener("startkeyframes",function(e){i.beginBlock({name:"@keyframes "+e.name,values:{}})}),a.addListener("startkeyframerule",function(e){for(var n="",t=0,a=e.keys.length;t<a;t++){var r=e.keys[t].text;n=n?n+","+r:r}i.beginBlock({name:n,values:{}})}),a.addListener("endkeyframerule",function(e){i.endBlock(!1)}),a.addListener("endkeyframes",function(e){i.endBlock(!1)}),a.addListener("startpage",function(e){log("Starting page with ID="+e.id+" and pseudo="+e.pseudo);var n="@page";e.pseudo&&(n=n+" "+e.pseudo),i.beginBlock({name:n,values:{}})}),a.addListener("endpage",function(e){log("Ending page with ID="+e.id+" and pseudo="+e.pseudo),i.endBlock(!1)}),a.addListener("startpagemargin",function(e){log("Starting page margin "+e.margin),i.beginBlock({name:"@page-margin",values:{}})}),a.addListener("endpagemargin",function(e){log("Ending page margin "+e.margin),i.endBlock(!1)}),a.addListener("starttopcenter",function(e){i.beginBlock({name:"@top-center",values:{}})}),a.addListener("endtopcenter",function(e){i.endBlock(!1)}),a.addListener("import",function(e){log("Importing "+e.uri+" for media types ["+e.media+"]");var n="@import "+e.uri;e.media&&(n=n+" "+e.media),i.beginBlock({name:n,values:""}),i.endBlock(!0)}),a.addListener("startrule",function(e){for(var n="",t=0,a=e.selectors.length;t<a;t++){var r=e.selectors[t];n=n?n+","+r.text:r.text}i.beginBlock({name:n,values:{}})}),a.addListener("endrule",function(e){i.endBlock(!0)}),a.addListener("property",function(e){i.prop(e.property.text,e.value.text,e.important)}),a.addListener("startmedia",function(e){i.beginBlock({name:"@media "+e.media,values:{}})}),a.addListener("endmedia",function(e){i.endBlock(!0)}),a.addListener("error",function(e){i.end(!1)}),a.parse(document.getElementById("input").value),i.result()}var r=e.klass({init:function(e){this._ordered=e&&e.ordered||!1},begin:function(){var e=this._ordered,n=this._stack=[];e?n.push([]):n.push({}),this._result=null},end:function(e){var n=this._stack;if(this._stack=null,e||1!==n.length)throw new Error("parse error");return this._result=n[0],this._result},beginBlock:function(e){this._stack.push(e)},endBlock:function(n){var t=(n&&this._orderd,this._stack),a=t.pop(),r=t[t.length-1],i=r.values||r;if(e.isArray(i)){var s={};s[a.name]=a.values,i.push(s)}else i[a.name]=a.values},prop:function(e,n,t){t&&(n+=" !important");var a=this._stack,r=a[a.length-1];r.values[e]=n},result:function(){return this._result}});return n.toJSON=a});
//# sourceMappingURL=sourcemaps/toJSON.js.map
